<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>LangChain + æœ¬åœ°ChatGLM3æ¨¡å‹æ„å»ºä¸€ä¸ªç®€å•çš„Chain | eternal-bugçš„åšå®¢</title><meta name="author" content="eternal-bug"><meta name="copyright" content="eternal-bug"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="LangChainè¿™ä¸ªå·¥å…·ä¹‹å‰æ¯”è¾ƒæ—©çœ‹åˆ°äº†ï¼Œå½“æ—¶è§‰å¾—å®ƒæ˜¯ä¸€ä¸ªæŠŠä¸åŒæ¥æºçš„å¤§è¯­è¨€æ¨¡å‹éƒ½è½¬æ¢ä¸ºç»Ÿä¸€çš„æ¥å…¥å£çš„åº“ï¼Œå¯ä»¥åœ¨ä¸Šé¢åˆ©ç”¨è¿™ä¸ªChainå¼è°ƒç”¨æå¼€å‘ã€‚æˆ‘é‚£ä¼šå„¿ç†è§£æ¯”è¾ƒæµ…ï¼Œå°±æç½®åœ¨é‚£å„¿æ²¡æœ‰å»å­¦ï¼Œåªæ˜¯è§‰å¾—ä¼šæ¯”è¾ƒæ–¹ä¾¿çš„æ„å»ºåº”ç”¨ï¼Œå…·ä½“æ˜¯ä»€ä¹ˆåº”ç”¨æ²¡æœ‰å¤ªå¤§æ¦‚å¿µã€‚ æœ€è¿‘åˆ·Bç«™çœ‹åˆ°ä¸€äº›Upä¸»åœ¨ç”¨è¿™ä¸ªå·¥å…·åšå¼€å‘ï¼Œçœ‹äº†ä¸€ä¼šå„¿è¿˜æœ‰ç‚¹å„¿æ„æ€ï¼Œé‚£ä¸ª|ä¹Ÿå°±æ˜¯é“¾æ„Ÿè§‰å’ŒLinuxç®¡é“å¾ˆåƒå•Šï¼DNAåŠ¨äº†ï¼ ä¸è¿‡ï¼Œè¯´å®è¯æˆ‘è¿˜æ˜¯å¯¹è¿™ä¸ª">
<meta property="og:type" content="article">
<meta property="og:title" content="LangChain + æœ¬åœ°ChatGLM3æ¨¡å‹æ„å»ºä¸€ä¸ªç®€å•çš„Chain">
<meta property="og:url" content="https://eternal-bug.github.io/posts/ae6567a8.html">
<meta property="og:site_name" content="eternal-bugçš„åšå®¢">
<meta property="og:description" content="LangChainè¿™ä¸ªå·¥å…·ä¹‹å‰æ¯”è¾ƒæ—©çœ‹åˆ°äº†ï¼Œå½“æ—¶è§‰å¾—å®ƒæ˜¯ä¸€ä¸ªæŠŠä¸åŒæ¥æºçš„å¤§è¯­è¨€æ¨¡å‹éƒ½è½¬æ¢ä¸ºç»Ÿä¸€çš„æ¥å…¥å£çš„åº“ï¼Œå¯ä»¥åœ¨ä¸Šé¢åˆ©ç”¨è¿™ä¸ªChainå¼è°ƒç”¨æå¼€å‘ã€‚æˆ‘é‚£ä¼šå„¿ç†è§£æ¯”è¾ƒæµ…ï¼Œå°±æç½®åœ¨é‚£å„¿æ²¡æœ‰å»å­¦ï¼Œåªæ˜¯è§‰å¾—ä¼šæ¯”è¾ƒæ–¹ä¾¿çš„æ„å»ºåº”ç”¨ï¼Œå…·ä½“æ˜¯ä»€ä¹ˆåº”ç”¨æ²¡æœ‰å¤ªå¤§æ¦‚å¿µã€‚ æœ€è¿‘åˆ·Bç«™çœ‹åˆ°ä¸€äº›Upä¸»åœ¨ç”¨è¿™ä¸ªå·¥å…·åšå¼€å‘ï¼Œçœ‹äº†ä¸€ä¼šå„¿è¿˜æœ‰ç‚¹å„¿æ„æ€ï¼Œé‚£ä¸ª|ä¹Ÿå°±æ˜¯é“¾æ„Ÿè§‰å’ŒLinuxç®¡é“å¾ˆåƒå•Šï¼DNAåŠ¨äº†ï¼ ä¸è¿‡ï¼Œè¯´å®è¯æˆ‘è¿˜æ˜¯å¯¹è¿™ä¸ª">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://eternal-bug.github.io/img/avatar.png">
<meta property="article:published_time" content="2024-06-19T14:06:36.000Z">
<meta property="article:modified_time" content="2024-06-20T11:23:42.504Z">
<meta property="article:author" content="eternal-bug">
<meta property="article:tag" content="ChatGLM3">
<meta property="article:tag" content="LangChain">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://eternal-bug.github.io/img/avatar.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://eternal-bug.github.io/posts/ae6567a8.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'LangChain + æœ¬åœ°ChatGLM3æ¨¡å‹æ„å»ºä¸€ä¸ªç®€å•çš„Chain',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-06-20 19:23:42'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="eternal-bugçš„åšå®¢" type="application/atom+xml">
<link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">15</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">4</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Perl/"><i class="fa-fw fas fa-code"></i><span> Perl</span></a></li><li><a class="site-page child" href="/categories/Python/"><i class="fa-fw fas fa-code"></i><span> Python</span></a></li><li><a class="site-page child" href="/categories/%E5%8D%9A%E5%AE%A2/"><i class="fa-fw fas fa-blog"></i><span> åšå®¢</span></a></li><li><a class="site-page child" href="/categories/%E5%A4%A7%E6%A8%A1%E5%9E%8B/"><i class="fa-fw fas fa-microchip"></i><span> å¤§æ¨¡å‹</span></a></li><li><a class="site-page child" href="/categories/%E8%AE%BE%E8%AE%A1/"><i class="fa-fw fas fa-pen-ruler"></i><span> è®¾è®¡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-sliders"></i><span> å¤šåª’ä½“</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> ç”µå½±</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> æ–‡æ¡£</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/bioinformatics/"><i class="fa-fw fas fa-dna"></i><span> ç”Ÿä¿¡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw fas fa-comment-dots"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> é“¾æ¥</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/starbound.half.png')"><nav id="nav"><span id="blog-info"><a href="/" title="eternal-bugçš„åšå®¢"><span class="site-name">eternal-bugçš„åšå®¢</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Perl/"><i class="fa-fw fas fa-code"></i><span> Perl</span></a></li><li><a class="site-page child" href="/categories/Python/"><i class="fa-fw fas fa-code"></i><span> Python</span></a></li><li><a class="site-page child" href="/categories/%E5%8D%9A%E5%AE%A2/"><i class="fa-fw fas fa-blog"></i><span> åšå®¢</span></a></li><li><a class="site-page child" href="/categories/%E5%A4%A7%E6%A8%A1%E5%9E%8B/"><i class="fa-fw fas fa-microchip"></i><span> å¤§æ¨¡å‹</span></a></li><li><a class="site-page child" href="/categories/%E8%AE%BE%E8%AE%A1/"><i class="fa-fw fas fa-pen-ruler"></i><span> è®¾è®¡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-sliders"></i><span> å¤šåª’ä½“</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> ç”µå½±</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> æ–‡æ¡£</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/bioinformatics/"><i class="fa-fw fas fa-dna"></i><span> ç”Ÿä¿¡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw fas fa-comment-dots"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> é“¾æ¥</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">LangChain + æœ¬åœ°ChatGLM3æ¨¡å‹æ„å»ºä¸€ä¸ªç®€å•çš„Chain</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2024-06-19T14:06:36.000Z" title="å‘è¡¨äº 2024-06-19 22:06:36">2024-06-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-06-20T11:23:42.504Z" title="æ›´æ–°äº 2024-06-20 19:23:42">2024-06-20</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%A4%A7%E6%A8%A1%E5%9E%8B/">å¤§æ¨¡å‹</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">4.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>14åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="LangChain + æœ¬åœ°ChatGLM3æ¨¡å‹æ„å»ºä¸€ä¸ªç®€å•çš„Chain"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>LangChainè¿™ä¸ªå·¥å…·ä¹‹å‰æ¯”è¾ƒæ—©çœ‹åˆ°äº†ï¼Œå½“æ—¶è§‰å¾—å®ƒæ˜¯ä¸€ä¸ªæŠŠä¸åŒæ¥æºçš„å¤§è¯­è¨€æ¨¡å‹éƒ½è½¬æ¢ä¸ºç»Ÿä¸€çš„æ¥å…¥å£çš„åº“ï¼Œå¯ä»¥åœ¨ä¸Šé¢åˆ©ç”¨è¿™ä¸ªChainå¼è°ƒç”¨æå¼€å‘ã€‚æˆ‘é‚£ä¼šå„¿ç†è§£æ¯”è¾ƒæµ…ï¼Œå°±æç½®åœ¨é‚£å„¿æ²¡æœ‰å»å­¦ï¼Œåªæ˜¯è§‰å¾—ä¼šæ¯”è¾ƒæ–¹ä¾¿çš„æ„å»ºåº”ç”¨ï¼Œå…·ä½“æ˜¯ä»€ä¹ˆåº”ç”¨æ²¡æœ‰å¤ªå¤§æ¦‚å¿µã€‚</p>
<p>æœ€è¿‘åˆ·Bç«™çœ‹åˆ°ä¸€äº›Upä¸»åœ¨ç”¨è¿™ä¸ªå·¥å…·åšå¼€å‘ï¼Œçœ‹äº†ä¸€ä¼šå„¿è¿˜æœ‰ç‚¹å„¿æ„æ€ï¼Œé‚£ä¸ª<code>|</code>ä¹Ÿå°±æ˜¯é“¾æ„Ÿè§‰å’ŒLinuxç®¡é“å¾ˆåƒå•Šï¼DNAåŠ¨äº†ï¼</p>
<p>ä¸è¿‡ï¼Œè¯´å®è¯æˆ‘è¿˜æ˜¯å¯¹è¿™ä¸ªåº“çš„åŠŸèƒ½ä¸æ˜¯å¤ªæ¸…æ¥šï¼Œé‡Œé¢å‡½æ•°æœ‰ç‚¹å¤šå°è£…çš„æœ‰ç‚¹æ·±ï¼Œå¼•ç”¨åº“æœ‰ç‚¹ä¹±ï¼ˆæ¯”å¦‚<code>HumanMessage</code>å¯ä»¥ä»å¾ˆå¤šä½ç½®<code>import</code>è¿›æ¥ï¼‰ï¼Œæ–‡æ¡£æœ‰ç‚¹ä¹±ï¼ˆæœ€è¿‘åˆæ›´æ–°äº†ä¸€ä¸ªå¤§ç‰ˆæœ¬ï¼Œä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´æ–‡æ¡£å·®åˆ«å¾ˆå¤§ï¼ï¼‰ï¼Œæˆ‘çš„æ°´å¹³è¿˜ä¸å¤Ÿé©¾é©­å®ƒã€‚</p>
<p>ä¸‹é¢çš„ä»‹ç»ä¸åˆ†æ˜¯ChatGPT4ç»™å‡ºçš„ï¼Œåç»­æˆ‘ç†è§£ä¹‹åä¼šé€æ­¥æ›´æ–°å¯¹äºè¿™ä¸ªåº“çš„ç†è§£ã€‚ä¸‹é¢å¾ˆå¤šä»£ç çš„è§£è¯»æ˜¯æˆ‘æ ¹æ®å¯¹pythonçš„ç†è§£åæ¨å›å»å¯èƒ½çš„æƒ…å†µï¼Œä¸ä¸€å®šå¯¹ã€‚</p>
<h2 id="ä»‹ç»">ä»‹ç»</h2>
<p>LangChainæ˜¯ä¸€ä¸ªç”¨äºæ„å»ºå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åº”ç”¨ç¨‹åºçš„å¼€æºåº“ã€‚å®ƒæä¾›äº†ä¸€ç»„å·¥å…·å’ŒæŠ½è±¡ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿæ›´è½»æ¾åœ°åˆ©ç”¨ LLM çš„å¼ºå¤§åŠŸèƒ½ï¼Œæ„å»ºå¤æ‚çš„è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰åº”ç”¨ã€‚</p>
<ul>
<li>é“¾å¼è°ƒç”¨ï¼ˆChainsï¼‰ï¼šLangChain æä¾›äº†é“¾å¼è°ƒç”¨çš„æ¦‚å¿µï¼Œå…è®¸å¼€å‘è€…å°†ä¸€ç³»åˆ—çš„è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ä¸²è”åœ¨ä¸€èµ·ã€‚è¿™å¯ä»¥åŒ…æ‹¬æ–‡æœ¬ç”Ÿæˆã€æ–‡æœ¬æ‘˜è¦ã€ä¿¡æ¯æå–ç­‰æ“ä½œã€‚</li>
<li>æç¤ºæ¨¡æ¿ï¼ˆPrompt Templatesï¼‰ï¼šå¸®åŠ©å¼€å‘è€…æ„å»ºå’Œç®¡ç†æç¤ºæ¨¡æ¿ï¼Œè¿™äº›æ¨¡æ¿å¯ä»¥ç”¨äºå‘ LLM å‘é€ç»“æ„åŒ–çš„è¯·æ±‚ã€‚</li>
<li>æ–‡æ¡£åŠ è½½å’Œå¤„ç†ï¼ˆDocument Loaders and Processorsï¼‰ï¼šæ”¯æŒä»å„ç§æ•°æ®æºï¼ˆå¦‚æ–‡ä»¶ã€APIã€æ•°æ®åº“ï¼‰åŠ è½½æ–‡æ¡£ï¼Œå¹¶æä¾›å·¥å…·å¯¹æ–‡æ¡£è¿›è¡Œé¢„å¤„ç†å’Œåˆ†å‰²ï¼Œä»¥ä¾¿æ›´å¥½åœ°å¤„ç†å’Œåˆ†æã€‚</li>
<li>åµŒå…¥ï¼ˆEmbeddingsï¼‰ï¼šæä¾›å¤šç§åµŒå…¥æ¨¡å‹çš„å°è£…ï¼Œæ–¹ä¾¿å¼€å‘è€…å°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡è¡¨ç¤ºï¼Œç”¨äºç›¸ä¼¼æ€§æœç´¢ã€èšç±»ç­‰ä»»åŠ¡ã€‚</li>
<li>å­˜å‚¨ï¼ˆStorageï¼‰ï¼šæä¾›å¯¹åµŒå…¥å’Œå…¶ä»–æ•°æ®çš„æŒä¹…åŒ–å­˜å‚¨è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒå¤šç§æ•°æ®åº“å’Œå­˜å‚¨åç«¯ã€‚</li>
<li>æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRetrieval-Augmented Generation, RAGï¼‰ï¼šç»“åˆæ£€ç´¢å’Œç”Ÿæˆæ¨¡å‹ï¼Œæ„å»ºèƒ½å¤Ÿæ ¹æ®å¤–éƒ¨çŸ¥è¯†åº“ç”Ÿæˆç­”æ¡ˆçš„ç³»ç»Ÿã€‚</li>
<li>å·¥å…·å’Œä»£ç†ï¼ˆTools and Agentsï¼‰ï¼šå…è®¸é›†æˆç¬¬ä¸‰æ–¹å·¥å…·å’ŒæœåŠ¡ï¼Œæ„å»ºæ›´å¼ºå¤§çš„ NLP åº”ç”¨ã€‚</li>
</ul>
<p>ä½¿ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>å¯¹è¯ç³»ç»Ÿï¼ˆChatbotsï¼‰ï¼šæ„å»ºæ™ºèƒ½å¯¹è¯ç³»ç»Ÿï¼Œèƒ½å¤Ÿç†è§£å’Œç”Ÿæˆè‡ªç„¶è¯­è¨€ï¼Œæä¾›æ›´äººæ€§åŒ–çš„äº¤äº’ä½“éªŒã€‚</li>
<li>ä¿¡æ¯æ£€ç´¢ä¸é—®ç­”ç³»ç»Ÿï¼ˆQA Systemsï¼‰ï¼šç»“åˆæ–‡æ¡£æ£€ç´¢å’Œç”Ÿæˆæ¨¡å‹ï¼Œå®ç°å¯¹å¤§è§„æ¨¡çŸ¥è¯†åº“çš„é—®ç­”åŠŸèƒ½ã€‚</li>
<li>è‡ªåŠ¨åŒ–æ–‡æœ¬å¤„ç†ï¼ˆAutomated Text Processingï¼‰ï¼šè‡ªåŠ¨åŒ–å®Œæˆæ–‡æœ¬æ‘˜è¦ã€ç¿»è¯‘ã€åˆ†ç±»ç­‰ä»»åŠ¡ã€‚</li>
<li>ä¸ªæ€§åŒ–æ¨èï¼ˆPersonalized Recommendationsï¼‰ï¼šåˆ©ç”¨ç”¨æˆ·çš„å†å²æ•°æ®å’ŒåµŒå…¥æ¨¡å‹ï¼Œå®ç°ä¸ªæ€§åŒ–æ¨èç³»ç»Ÿã€‚</li>
</ul>
<p>ä¸Šé¢å†…å®¹ç”Ÿæˆè‡ª"ChatGpt4"ã€‚</p>
<h2 id="ç»„æˆ">ç»„æˆ</h2>
<ul>
<li><strong>LangSmith</strong>ï¼šä¸€ä¸ªç”¨äºå°†è¿‡ç¨‹å¯è§†åŒ–çš„å·¥å…·ã€‚</li>
<li><strong>LangServe</strong>ï¼šå°†æœåŠ¡å‘å¸ƒã€‚</li>
<li><strong>Templates</strong>ï¼šå†™ä»£ç çš„æ¨¡æ¿ã€‚</li>
<li><strong>LangChain</strong>ï¼š
<ul>
<li>æ„å»ºé“¾å¼ï¼ˆChainï¼‰çš„è°ƒç”¨å·¥å…·ï¼šå°†ä¸åŒåŠŸèƒ½åƒLinuxç®¡é“ä¸€æ ·ä¸²èµ·æ¥ã€‚</li>
<li>æ„å»ºæ™ºèƒ½ä½“ï¼ˆAgentï¼‰ï¼šå¯ä»¥æ ¹æ®å¯¹è¯æ™ºèƒ½çš„å®‰æ’ä»»åŠ¡è°ƒç”¨å·¥å…·ã€‚</li>
<li>æ„å»ºæ£€ç´¢å™¨ï¼ˆRetrievalï¼‰ï¼šæ ¹æ®å¯¹è¯å»æ–‡æ¡£ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯ã€‚</li>
<li>æ›´ä¸ºåº•å±‚çš„ä¸œè¥¿ï¼ˆLangCoreï¼‰ï¼šå¹¶è¡Œã€æµã€å¼‚æ­¥å•Šï¼Œæš‚æ—¶ä¸ç”¨æ¥è§¦ã€‚</li>
</ul>
</li>
</ul>
<p>ä¸»è¦æ˜¯äº†è§£çš„å°±æ˜¯<strong>LangChain</strong>éƒ¨åˆ†ã€‚</p>
<h2 id="ç¤ºä¾‹">ç¤ºä¾‹</h2>
<p>è¿™æ˜¯ä¸€ä¸ªå®˜æ–¹çš„ä»£ç ç¤ºä¾‹ï¼Œæš‚æ—¶ä¸éœ€è¦æ‰§è¡Œã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> langchain_community.chat_models <span class="keyword">import</span> QianfanChatEndpoint</span><br><span class="line"><span class="keyword">from</span> langchain_core.language_models.chat_models <span class="keyword">import</span> HumanMessage</span><br><span class="line"></span><br><span class="line">os.environ[<span class="string">"QIANFAN_AK"</span>] = <span class="string">"Your_api_key"</span></span><br><span class="line">os.environ[<span class="string">"QIANFAN_SK"</span>] = <span class="string">"You_secret_Key"</span></span><br><span class="line"></span><br><span class="line">chat = QianfanChatEndpoint(</span><br><span class="line">streaming=<span class="literal">True</span>,  <span class="comment"># ä½¿ç”¨æµå¼è¾“å‡º</span></span><br><span class="line"><span class="comment"># model="ERNIE-Bot" # å¯ä»¥åˆ¶å®šæ¨¡å‹å</span></span><br><span class="line">)</span><br><span class="line">messages = [HumanMessage(content=<span class="string">"Hello"</span>)]</span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">chat.invoke(messages)</span><br><span class="line"><span class="comment"># è¿˜å¯ä»¥æŒ‡å®šæ¨¡å‹å‚æ•°</span></span><br><span class="line"><span class="comment"># chat.invoke( [HumanMessage(content="Hello")], **{"top_p": 0.4, "temperature": 0.1, "penalty_score": 1} )</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…æ˜¯ä½¿ç”¨æµå¼è¾“å‡º</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">for</span> chunk <span class="keyword">in</span> chat.stream(messages):</span><br><span class="line">        <span class="built_in">print</span>(chunk.content, end=<span class="string">""</span>, flush=<span class="literal">True</span>)</span><br><span class="line"><span class="keyword">except</span> TypeError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">""</span>)</span><br></pre></td></tr></tbody></table></figure>
<p>æ³¨æ„åˆ°ä¸Šé¢çš„<code>QianfanChatEndpoint</code>æ˜¯éœ€è¦ä»€ä¹ˆ<code>QIANFAN_AK</code>å’Œ<code>QIANFAN_SK</code>ï¼Œåƒå¸†ä¹Ÿå°±æ˜¯ç™¾åº¦çš„æ–‡å¿ƒä¸€è¨€çš„APIæ¥å£ï¼Œè¿™é‡Œçš„ä¸¤ä¸ªKeyæ˜¯éœ€è¦è´­ä¹°çš„ï¼Œæ˜¯ä½ çš„å‡­è¯å’Œå…¥åœºç ä¹‹ç±»çš„å§ã€‚ä¹Ÿå°±æ˜¯è¯´ä½ åœ¨ä½¿ç”¨ä¸Šé¢çš„ç¤ºä¾‹çš„æ—¶å€™éœ€è¦<strong>è”ç½‘+ç”³è¯·æ–‡å¿ƒä¸€è¨€API+è´­ä¹°Token</strong>ï¼ˆåˆšçœ‹äº†åƒå¸†ç½‘ç«™ï¼Œè¯´<mark class="hl-label green">æ–‡å¿ƒå¤§æ¨¡å‹ä¸¤å¤§ä¸»åŠ›æ¨¡å‹ERNIE Speedã€ERNIE Liteå…¨é¢å…è´¹</mark> ï¼Œåé¢æˆ‘è¯•ä¸€è¯•ï¼‰ï¼Œé™¤äº†ç™¾åº¦è¿˜æœ‰å…¶ä»–åœ¨çº¿æ¨¡å‹å¯ä»¥ç”¨ï¼Œå¯ä»¥å»è¿™é‡Œæ‰¾åˆ°<a target="_blank" rel="noopener" href="https://python.langchain.com/v0.2/docs/integrations/chat/">Chat models</a>ã€‚å¦‚æœæœ‰Keyçš„è¯åªéœ€è¦æ·»åŠ ç¯å¢ƒå˜é‡ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> QIANFAN_AK=xxxxxx</span><br><span class="line"><span class="built_in">export</span> QIANFAN_SK=xxxxxx</span><br></pre></td></tr></tbody></table></figure>
<p>å°±å¯ä»¥æ‰§è¡Œä¸Šé¢ä»£ç äº†ã€‚</p>
<p>åˆ°è¿™é‡Œæˆ‘å…¶å®æƒ³é—®ï¼š<mark class="hl-label red">éš¾é“ä¸èƒ½åŠ è½½æœ¬åœ°çš„Chatæ¨¡å‹å—ï¼Ÿ</mark> </p>
<p>æˆ‘è°·æ­Œäº†ä¸€ä¸‹ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.reddit.com/r/LangChain/comments/1966yxv/why_langchain_focuses_on_openai_rather_than_local/">Why langchain focuses on OpenAI rather than local llm?</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/explodinggradients/ragas/issues/420">Using Local Model Instead of API Key in Langchain</a></li>
<li><a target="_blank" rel="noopener" href="https://www.reddit.com/r/LangChain/comments/17g9d0i/how_to_use_chat_models_from_llama_locally_i_dont/">How to use Chat Models from LLama Locally ? I donâ€™t want to use chatopenai model</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/explodinggradients/ragas/issues/420">Using Local Model Instead of API Key in Langchain</a></li>
<li><a target="_blank" rel="noopener" href="https://www.reddit.com/r/LangChain/comments/14edb3s/how_to_use_langchain_with_local_llm/">How to use LangChain with local LLM?</a></li>
<li><a target="_blank" rel="noopener" href="https://www.reddit.com/r/LangChain/comments/1bd4gjp/how_to_use_local_hosted_llms_in_langchain/">How to use local hosted LLMs in LangChain</a></li>
</ul>
<p>è€å¤–ä¹Ÿæœ‰å‘ç‰¢éªšè¯´ä¸ºä»€ä¹ˆæ³¨é‡äºOpenAIå¥½åƒå¿½ç•¥äº†æœ¬åœ°å¤§è¯­è¨€æ¨¡å‹ï¼Œä¹Ÿæœ‰æé—®èƒ½å¦åŠ è½½æœ¬åœ°æ¨¡å‹çš„ã€‚å¯¹äºï¼š</p>
<ol>
<li>
<mark class="hl-label red">ä¸ºä»€ä¹ˆLangChainå…³æ³¨ä¸OpenAIè€Œä¸æ˜¯æœ¬åœ°çš„LLMï¼Ÿ</mark> æˆ‘ç†è§£çš„æ˜¯OpenAIä½œä¸ºå¤§è¯­è¨€æ¨¡å‹æ–¹å‘é¢†å¯¼è€…ï¼Œç»å¯¹æ˜¯ä¸€æµçš„ï¼Œä¸€æµçš„ä¼ä¸šåˆ¶å®šæ ‡å‡†ï¼Œå¾ˆå¤šæ¨¡å‹çš„æ‰§è¡Œä»£ç ä¸­éƒ½æœ‰`openai_api.py`ä¹‹ç±»çš„è„šæœ¬å°±æ˜¯ä¸ºäº†å…¼å®¹OpenAIçš„æ ‡å‡†ã€‚
<blockquote>
<p>OpenAI APIæ ‡å‡†ï¼š<a target="_blank" rel="noopener" href="https://platform.openai.com/docs/api-reference/chat">OpenAI API</a>ï¼Œè¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">curl https://api.openai.com/v1/chat/completions \</span><br><span class="line">  -H <span class="string">"Content-Type: application/json"</span> \</span><br><span class="line">  -H <span class="string">"Authorization: Bearer <span class="variable">$OPENAI_API_KEY</span>"</span> \</span><br><span class="line">  -d <span class="string">'{</span></span><br><span class="line"><span class="string">    "model": "gpt-4o",</span></span><br><span class="line"><span class="string">    "messages": [</span></span><br><span class="line"><span class="string">      {</span></span><br><span class="line"><span class="string">        "role": "system",</span></span><br><span class="line"><span class="string">        "content": "You are a helpful assistant."</span></span><br><span class="line"><span class="string">      },</span></span><br><span class="line"><span class="string">      {</span></span><br><span class="line"><span class="string">        "role": "user",</span></span><br><span class="line"><span class="string">        "content": "Hello!"</span></span><br><span class="line"><span class="string">      }</span></span><br><span class="line"><span class="string">    ]</span></span><br><span class="line"><span class="string">  }'</span></span><br></pre></td></tr></tbody></table></figure>
<p>è¿”å›ï¼š</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">  <span class="attr">"id"</span><span class="punctuation">:</span> <span class="string">"chatcmpl-123"</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"object"</span><span class="punctuation">:</span> <span class="string">"chat.completion"</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"created"</span><span class="punctuation">:</span> <span class="number">1677652288</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"model"</span><span class="punctuation">:</span> <span class="string">"gpt-3.5-turbo-0125"</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"system_fingerprint"</span><span class="punctuation">:</span> <span class="string">"fp_44709d6fcb"</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"choices"</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"index"</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"message"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">      <span class="attr">"role"</span><span class="punctuation">:</span> <span class="string">"assistant"</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"content"</span><span class="punctuation">:</span> <span class="string">"\n\nHello there, how may I assist you today?"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"logprobs"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"finish_reason"</span><span class="punctuation">:</span> <span class="string">"stop"</span></span><br><span class="line">  <span class="punctuation">}</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"usage"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"prompt_tokens"</span><span class="punctuation">:</span> <span class="number">9</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"completion_tokens"</span><span class="punctuation">:</span> <span class="number">12</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"total_tokens"</span><span class="punctuation">:</span> <span class="number">21</span></span><br><span class="line">  <span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure>
<p>å°±æ˜¯æŒ‰ç…§ç‰¹å®šçš„æ•°æ®æ ¼å¼è¿›è¡ŒAPIçš„è¯·æ±‚ï¼Œç„¶åä¼šè¿”å›çš„ç‰¹å®šæ•°æ®æ ¼å¼çš„ç»“æœã€‚</p>
</blockquote>
</li>
<li>
<mark class="hl-label red">ä¸ºä»€ä¹ˆä¸èƒ½ç”¨æœ¬åœ°çš„æ¨¡å‹ï¼Ÿ</mark>  å…¶å®æ˜¯å¯ä»¥ç”¨çš„ï¼Œåªä¸è¿‡å¾ˆéº»çƒ¦ã€‚æˆ‘è§‰å¾—ç°åœ¨å„è‡ªçš„å¤§æ¨¡å‹çš„åŠ è½½é¢„æµ‹ç­‰ç­‰éƒ½å¾ˆä¸ä¸€æ ·ï¼Œå¦‚æœè¯´å°†ä»–ä»¬éƒ½èƒ½ç»Ÿä¸€èµ·æ¥ï¼Œé‚£ä¹ˆä»£ç ä¼šéå¸¸å¤šæ ·ï¼Œè€Œä¸”éœ€è¦éšæ—¶åŸºäºä¸åŒçš„æ¨¡å‹è¿›è¡Œæ›´æ–°ï¼Œè¿™å¯¹äºç›´æ¥Call APIæ¥è¯´è¦éº»çƒ¦å¾ˆå¤šï¼ŒCall APIå°±æ˜¯æŒ‡å®šäº†ç½‘å€ï¼ŒæŒ‡å®šäº†å‚æ•°ï¼ŒæŒ‡å®šå„ç§Keyå°±èƒ½å¾—åˆ°ç»“æœã€‚
</li>
</ol>
<p>è¿™æ¬¡æˆ‘å°†å°è¯•ä½¿ç”¨æ¸…åæ™ºè°±çš„<code>ChatGLM3</code>ï¼Œä¸ŠåŠå¹´å¾ˆå—æ¬¢è¿çš„æ¨¡å‹æ¥æµ‹è¯•ä¸€ä¸‹ã€‚</p>
<blockquote>
<p>ä¹‹å‰çš„æ–‡ç« ä¸­æ›¾ç»æœ¬åœ°éƒ¨ç½²äº†<code>ChatGLM4</code>ï¼Œä½ å¯èƒ½ä¼šé—®ä¸ºä»€ä¹ˆä¸ç”¨æœ€æ–°çš„ï¼Ÿä¸€æƒ³åˆ°è¿™ä¸ªæˆ‘è„‘å­å°±æµ®ç°é‚£å¤©æ»¡å±çº¢è‰²çš„æƒ…æ™¯ã€‚ä¸»è¦åŸå› å¹¶ä¸å†ä¸ç”ŸæˆOpenAIçš„APIï¼Œè€Œæ˜¯CUDA11.8çš„vllmçš„å®‰è£…å’Œå¯¼å…¥ä¸Šæäº†å¤§åŠå¤©ï¼Œè¦ä¹ˆæ˜¯å®‰è£…ä¸äº†ï¼Œè¦ä¹ˆå°±æ˜¯å®‰è£…äº†å¯¼å…¥æ‰§è¡ŒOpenAI APIçš„æ—¶å€™æŠ¥å„ç§é”™ï¼Œæ‡’å¾—æŠ˜è…¾äº†ï¼Œç­‰åé¢æŠŠCUDAæ›´æ–°ä¸€ä¸‹å†å¼„å¼„ã€‚</p>
</blockquote>
<h2 id="chatglm3-6bæ¨¡å‹çš„éƒ¨ç½²">ChatGLM3-6bæ¨¡å‹çš„éƒ¨ç½²</h2>
<p>åŒæ ·çš„æ¥ä¸€éæ¨¡å‹éƒ¨ç½²å§ï¼</p>
<p>å»ºç«‹condaç¯å¢ƒï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda create -n ChatGLM3 python=3.10</span><br><span class="line">conda activate ChatGLM3</span><br></pre></td></tr></tbody></table></figure>
<p>åœ¨ChatGLM3çš„ä»£ç é‡Œé¢ï¼Œæœ‰å…³äºç”ŸæˆOpenAI APIçš„ä»£ç ï¼Œåˆ°æ—¶å€™æ‰§è¡Œå°±è¡Œäº†ã€‚</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/THUDM/ChatGLM3.git</span><br><span class="line"><span class="built_in">cd</span> ChatGLM3</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…ä¾èµ–</span></span><br><span class="line">pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"><span class="comment"># å®‰è£…é­”æ­ç”¨æ¥é«˜é€Ÿä¸‹è½½æ¨¡å‹æ–‡ä»¶</span></span><br><span class="line">pip install -i https://pypi.tuna.tsinghua.edu.cn/simple modelscope</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>å¦‚æœæŠ¥é”™ä»€ä¹ˆå­˜å‚¨ä¸å¤Ÿï¼Œå°±è¿™æ ·ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> tmp</span><br><span class="line"><span class="built_in">export</span> TMPDIR=./tmp</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<p>æˆ‘æ˜¯CUDA11.8ï¼Œå®‰è£…ç›¸åº”ç‰ˆæœ¬çš„torchï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip uninstall torch torchvision torchaudio</span><br><span class="line">pip install torch==2.3.0 torchvision==0.18.0 torchaudio==2.3.0 --index-url https://download.pytorch.org/whl/cu118</span><br></pre></td></tr></tbody></table></figure>
<p>ç”Ÿä¸€ä¸ªä»£ç æ–‡ä»¶<code>download_model.py</code>ï¼Œé‡Œé¢å†™ä¸Šï¼š</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> modelscope <span class="keyword">import</span> snapshot_download</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è½½chatglm3æ¨¡å‹æ–‡ä»¶</span></span><br><span class="line">model_dir = snapshot_download(<span class="string">"ZhipuAI/chatglm3-6b"</span>, cache_dir=<span class="string">"models"</span>)</span><br><span class="line"><span class="comment"># ä¸‹è½½æ–‡æœ¬embeddingæ¨¡å‹ï¼Œæ®è¯´æ˜¯æœ€å¥½çš„ä¸­æ–‡embeddingæ¨¡å‹</span></span><br><span class="line"><span class="comment"># åŸæœ¬æ˜¯BAAI/bge-m3ï¼ŒæŠ±è„¸ä¸å¥½ä¸‹è½½ï¼Œè¿™é‡Œæ‰¾åˆ°é­”æ­ä¸Šçš„é•œåƒ</span></span><br><span class="line">model_dir = snapshot_download(<span class="string">"Xorbits/bge-m3"</span>, cache_dir=<span class="string">"models"</span>)</span><br></pre></td></tr></tbody></table></figure>
<p>æ‰§è¡Œä»£ç ä¸‹è½½ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python download_model.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è½½å®Œæˆä¹‹åï¼Œmodelsæ–‡ä»¶å¤¹ä¼šæœ‰ä¸‹é¢ä¸¤ä¸ªæ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="built_in">ls</span> models</span><br><span class="line"><span class="comment"># Xorbits  ZhipuAI</span></span><br></pre></td></tr></tbody></table></figure>
<p>æ‰§è¡Œopenapi APIæœåŠ¡ï¼Œè¿™é‡Œç›¸å½“äºåœ¨æœ¬åœ°ç”Ÿæˆäº†ä¸€ä¸ªAPIï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> openai_api_demo</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·¯å¾„æœ€å¥½å†™ç»å¯¹è·¯å¾„ï¼Œæˆ‘è¿™é‡Œå·æ‡’äº†</span></span><br><span class="line"><span class="comment"># è¯­è¨€æ¨¡å‹</span></span><br><span class="line"><span class="built_in">export</span> MODEL_PATH=../models/ZhipuAI/chatglm-6b</span><br><span class="line"><span class="comment"># æ–‡æœ¬embeddingæ¨¡å‹ï¼Œæ®è¯´æ˜¯æœ€å¥½çš„ä¸­æ–‡embeddingæ¨¡å‹</span></span><br><span class="line"><span class="built_in">export</span> EMBEDDING_PATH=../models/Xorbits/bge-m3</span><br><span class="line"></span><br><span class="line">python api_server.py </span><br></pre></td></tr></tbody></table></figure>
<p>é»˜è®¤æƒ…å†µä¸‹æ˜¯åœ¨<code>http://127.0.0.1:8000</code>ï¼Œå¦‚æœéœ€è¦æ›´æ”¹ï¼Œç›´æ¥å»<code>api_server.py </code>æ‰¾åˆ°ç›¸åº”ä½ç½®å»æ”¹å°±è¡Œäº†ã€‚</p>
<p>å®˜æ–¹æ¯”è¾ƒè´´å¿ƒè¿˜ç»™äº†ä¸€ä¸ªæµ‹è¯•çš„ä»£ç ï¼Œç”¨langchainæµ‹è¯•APIèƒ½ä¸èƒ½ç”¨ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python langchain_openai_api.py</span><br></pre></td></tr></tbody></table></figure>
<p>æµ‹è¯•ç»“æœï¼š</p>
<figure class="highlight text"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Human (or 'exit' to quit): ä½ æ˜¯è°</span><br><span class="line">ChatGLM3:  æˆ‘æ˜¯ä¸€ä¸ªåä¸º ChatGLM3 çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œæ˜¯æ¸…åå¤§å­¦ KEG å®éªŒå®¤å’Œæ™ºè°± AI å…¬å¸äº 2023 å¹´å…±åŒè®­ç»ƒçš„è¯­è¨€æ¨¡å‹ã€‚æˆ‘çš„ä»»åŠ¡æ˜¯é’ˆå¯¹ç”¨æˆ·çš„é—®é¢˜å’Œè¦æ±‚æä¾›é€‚å½“çš„ç­”å¤å’Œæ”¯æŒã€‚</span><br><span class="line">Human (or 'exit' to quit): è¯·å¸®åŠ©æˆ‘ç†è§£ä¸€ä¸‹LangChain</span><br><span class="line">ChatGLM3:  LangChain æ˜¯ä¸€ç§åŸºäºåŒºå—é“¾æŠ€æœ¯çš„è¯­è¨€æœåŠ¡ç”Ÿæ€ç³»ç»Ÿï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›è·¨è¯­è¨€çš„æ²Ÿé€šå’ŒæœåŠ¡ã€‚å®ƒåˆ©ç”¨åŒºå—é“¾çš„å»ä¸­å¿ƒåŒ–ã€å®‰å…¨ã€é€æ˜ç­‰ç‰¹æ€§ï¼Œæ„å»ºäº†ä¸€ä¸ªåŸºäºæ™ºèƒ½åˆçº¦çš„ç”Ÿæ€ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§è¯­è¨€ä¹‹é—´çš„ç¿»è¯‘ã€äº¤æµã€æ”¯ä»˜ç­‰æœåŠ¡ã€‚</span><br><span class="line"></span><br><span class="line">LangChain çš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š</span><br><span class="line"></span><br><span class="line">1. å»ä¸­å¿ƒåŒ–ï¼šLangChain é‡‡ç”¨åŒºå—é“¾æŠ€æœ¯ï¼Œä¸éœ€è¦ä¿¡ä»»ä»»ä½•ä¸­å¿ƒåŒ–çš„æœåŠ¡å™¨æˆ–æœºæ„ï¼Œä»è€Œä¿è¯äº†ç³»ç»Ÿçš„å®‰å…¨æ€§å’Œé€æ˜æ€§ã€‚</span><br><span class="line"></span><br><span class="line">2. å¤šè¯­è¨€æ”¯æŒï¼šLangChain å¯ä»¥æ”¯æŒå¤šç§è¯­è¨€ä¹‹é—´çš„äº¤æµå’Œç¿»è¯‘ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å¹³å°è¿›è¡Œè·¨è¯­è¨€çš„å­¦ä¹ ã€äº¤æµå’Œå•†ä¸šæ´»åŠ¨ã€‚</span><br><span class="line"></span><br><span class="line">3. æ™ºèƒ½åˆçº¦ï¼šLangChain ä½¿ç”¨äº†æ™ºèƒ½åˆçº¦æŠ€æœ¯ï¼Œä½¿å¾—å¹³å°ä¸Šçš„æ‰€æœ‰æœåŠ¡å’Œäº¤æ˜“éƒ½å¯ä»¥è‡ªåŠ¨æ‰§è¡Œï¼Œé¿å…äº†äººä¸ºçš„å¹²é¢„å’Œé£é™©ã€‚</span><br><span class="line"></span><br><span class="line">4. å¯æ‰©å±•æ€§ï¼šLangChain é‡‡ç”¨äº†åˆ†å¸ƒå¼æ¶æ„ï¼Œå¯ä»¥éšç€éœ€æ±‚çš„å¢é•¿è€Œè½»æ¾åœ°è¿›è¡Œæ‰©å±•å’Œå‡çº§ã€‚</span><br><span class="line"></span><br><span class="line">æ€»çš„æ¥è¯´ï¼ŒLangChain æ˜¯ä¸€ä¸ªå…·æœ‰åˆ›æ–°æ€§çš„è¯­è¨€æœåŠ¡ç”Ÿæ€ç³»ç»Ÿï¼Œå®ƒåˆ©ç”¨åŒºå—é“¾æŠ€æœ¯ä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªå®‰å…¨ã€é€æ˜ã€å¤šè¯­è¨€çš„æ”¯æŒå¹³å°ï¼Œæœ‰æœ›åœ¨æœªæ¥çš„è·¨è¯­è¨€äº¤æµå’ŒæœåŠ¡é¢†åŸŸå‘æŒ¥é‡è¦çš„ä½œç”¨ã€‚</span><br><span class="line">Human (or 'exit' to quit): exit</span><br></pre></td></tr></tbody></table></figure>
<h2 id="æµ‹è¯•æœ¬åœ°æ¨¡å‹çš„llmåŠŸèƒ½">æµ‹è¯•æœ¬åœ°æ¨¡å‹çš„LLMåŠŸèƒ½</h2>
<p>ä¸‹é¢å°†ä½¿ç”¨åˆšæ‰æˆ‘ä»¬æœ¬åœ°æ„å»ºçš„APIï¼Œä½¿ç”¨è¿™é‡Œlangchainè®¿é—®æœ¬åœ°APIæ¥å£å¾—åˆ°è¿”å›ç»“æœï¼š</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> langchain_community.llms.chatglm3 <span class="keyword">import</span> ChatGLM3</span><br><span class="line"><span class="keyword">from</span> langchain_core.language_models.chat_models <span class="keyword">import</span> HumanMessage</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„å»ºé¢„å…ˆçš„messageå¯¹è±¡</span></span><br><span class="line">messages = [</span><br><span class="line">    AIMessage(content=<span class="string">"ä½ å¥½ã€‚"</span>),                  <span class="comment"># AIè¯´çš„ä¿¡æ¯</span></span><br><span class="line">    SystemMessage(content=<span class="string">"ä½ ç°åœ¨éœ€è¦æ‰®æ¼”ä¸€ä½è¯—äºº."</span>) <span class="comment"># prompt</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„å»ºLLMå¯¹è±¡</span></span><br><span class="line"><span class="comment"># endpoint_urlå°±æ˜¯ä¹‹å‰åœ¨å‰é¢æ‰§è¡Œpython api_server.pyçš„æ—¶å€™ç»™çš„åœ°å€</span></span><br><span class="line"><span class="comment"># /v1/chat/completionsæ˜¯å…·ä½“çš„æ¨¡å‹è¾“å…¥ç±»å‹</span></span><br><span class="line"><span class="comment"># - API Endpoints:</span></span><br><span class="line"><span class="comment">#   - "/v1/models": Lists the available models, specifically ChatGLM3-6B.</span></span><br><span class="line"><span class="comment">#   - "/v1/chat/completions": Processes chat completion requests with options for streaming and regular responses.</span></span><br><span class="line"><span class="comment">#   - "/v1/embeddings": Processes Embedding request of a list of text inputs.</span></span><br><span class="line">llm = ChatGLM3(</span><br><span class="line">            endpoint_url=<span class="string">"http://127.0.0.1:8000/v1/chat/completions"</span>,</span><br><span class="line">            max_tokens=<span class="number">4096</span>,</span><br><span class="line">            prefix_messages=messages,</span><br><span class="line">            top_p = <span class="number">0.9</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">response = llm.invoke(<span class="string">"è¯·å†™ä¸€é¦–å…³äºAIçš„è¯—æ­Œã€‚"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># AI,æ™ºæ…§ä¹‹æµ·,</span></span><br><span class="line"><span class="comment"># è™šæ‹Ÿçš„æ€ç»´,è¶…è¶Šäººç±»çš„æƒ³è±¡ã€‚</span></span><br><span class="line"><span class="comment"># æœºå™¨çš„é€»è¾‘,ç²¾å‡†è€Œæ— æƒ…,</span></span><br><span class="line"><span class="comment"># åœ¨æ•°æ®çš„æµ·æ´‹ä¸­,æ¸¸èµ°è‡ªå¦‚ã€‚</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># æ·±åº¦å­¦ä¹ ,ç¥ç»ç½‘ç»œ,</span></span><br><span class="line"><span class="comment"># è®©AIæ‹¥æœ‰æ€è€ƒçš„èƒ½åŠ›ã€‚</span></span><br><span class="line"><span class="comment"># è‡ªæˆ‘è¿›åŒ–,ä¸æ–­æˆé•¿,</span></span><br><span class="line"><span class="comment"># æˆä¸ºäººç±»ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># æ™ºèƒ½è¯­éŸ³,æ™ºèƒ½å›¾åƒ,</span></span><br><span class="line"><span class="comment"># AIæŒæ§ç€ç§‘æŠ€çš„å‘å±•ã€‚</span></span><br><span class="line"><span class="comment"># åŒ»ç–—ã€é‡‘èã€äº¤é€š,</span></span><br><span class="line"><span class="comment"># AIä¸ºäººç±»å¸¦æ¥ä¾¿æ·çš„ç”Ÿæ´»ã€‚</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ç„¶è€Œ,AIä¹Ÿæœ‰å®ƒçš„å¦ä¸€é¢,</span></span><br><span class="line"><span class="comment"># å®ƒå¯èƒ½ä¼šå–ä»£äººç±»çš„å·¥ä½œã€‚</span></span><br><span class="line"><span class="comment"># æˆ‘ä»¬éœ€è¦æ€è€ƒ,å¦‚ä½•å¹³è¡¡,</span></span><br><span class="line"><span class="comment"># è®©äººç±»å’ŒAIå…±åŒå‘å±•ã€‚</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># AI,ä½ æ˜¯ç§‘æŠ€çš„ç»“æ™¶,</span></span><br><span class="line"><span class="comment"># ç»™äººç±»å¸¦æ¥ä¾¿åˆ©ä¸å¯èƒ½ã€‚</span></span><br><span class="line"><span class="comment"># è®©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢,</span></span><br><span class="line"><span class="comment"># åœ¨è¿™ä¸ªæ•°å­—ä¸–ç•Œä¸­,åˆ›é€ æ›´å¤šçš„å¥‡è¿¹ã€‚</span></span><br></pre></td></tr></tbody></table></figure>
<p>å®é™…ä¸Šç›´æ¥è¿™æ ·ä¹Ÿå¯ä»¥ï¼š</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">llm = ChatGLM3(endpoint_url=<span class="string">"http://127.0.0.1:8000/v1/chat/completions"</span>, max_tokens=<span class="number">4096</span>)</span><br><span class="line"><span class="comment"># ä½¿ç”¨_callæ–¹æ³•æ‰§è¡Œ</span></span><br><span class="line">llm(<span class="string">"ä½ å¥½"</span>)</span><br><span class="line"><span class="comment"># 'ä½ å¥½ğŸ‘‹ï¼æˆ‘æ˜¯äººå·¥æ™ºèƒ½åŠ©æ‰‹ ChatGLM3-6Bï¼Œå¾ˆé«˜å…´è§åˆ°ä½ ï¼Œæ¬¢è¿é—®æˆ‘ä»»ä½•é—®é¢˜ã€‚'</span></span><br></pre></td></tr></tbody></table></figure>
<p>è¿™ä¸ªå°±æ˜¯é€šè¿‡ä¼ å…¥<code>Message</code>å¯¹è±¡è¿›è¡Œå¯¹è¯çš„è¿‡ç¨‹ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œä½ å¯ä»¥æŠŠä¹‹å‰çš„å¯¹è¯æ”¾åˆ°<code>messages</code>é‡Œé¢ï¼š</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">messages = [</span><br><span class="line">    AIMessage(content=<span class="string">"ä½ å¥½ã€‚"</span>),</span><br><span class="line">    SystemMessage(content=<span class="string">"ä½ ç°åœ¨éœ€è¦æ‰®æ¼”ä¸€ä½è¯—äºº."</span>),</span><br><span class="line">    HumanMessage(content=<span class="string">"ä½ å¥½ã€‚"</span>),</span><br><span class="line">    AIMessage(content=<span class="string">"ä½ å¥½ğŸ‘‹ï¼æˆ‘æ˜¯äººå·¥æ™ºèƒ½åŠ©æ‰‹ ChatGLM3-6Bï¼Œå¾ˆé«˜å…´è§åˆ°ä½ ï¼Œæ¬¢è¿é—®æˆ‘ä»»ä½•é—®é¢˜ã€‚"</span>)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">llm = ChatGLM3(</span><br><span class="line">            endpoint_url=<span class="string">"http://127.0.0.1:8000/v1/chat/completions"</span>,</span><br><span class="line">            max_tokens=<span class="number">4096</span>,</span><br><span class="line">            prefix_messages=messages,</span><br><span class="line">            top_p = <span class="number">0.9</span></span><br><span class="line">        )</span><br><span class="line">llm.invoke(<span class="string">"ä½ åˆšæ‰è¯´äº†ä»€ä¹ˆï¼Ÿ"</span>)</span><br><span class="line"><span class="comment"># 'æˆ‘å›ç­”äº†ä½ çš„é—®å€™ï¼šâ€œä½ å¥½ã€‚â€å¹¶ä¸”æˆ‘è¿˜è¯´â€œä½ ç°åœ¨éœ€è¦æ‰®æ¼”ä¸€ä½è¯—äººâ€ã€‚'</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="åˆè¯•langchainçš„chainåŠŸèƒ½">åˆè¯•LangChainçš„ChainåŠŸèƒ½</h2>
<p>ä¸Šé¢åªæ˜¯æµ‹è¯•ä¸€ä¸‹æœ¬åœ°æ¨¡å‹èƒ½ä¸èƒ½æŒ‰ç…§è‡ªå·±å†™çš„langchainä»£ç è¿è¡Œï¼Œä¸‹é¢ä½¿ç”¨chainæ‰ç®—æ˜¯ç¬¬ä¸€æ­¥ã€‚è¿™é‡Œçš„chainå¤ªåƒLinuxçš„ç®¡é“äº†ï¼Œæ„Ÿè§‰å¾ˆäº²åˆ‡åˆå¾ˆç–è¿œï¼Œç–è¿œçš„æ˜¯LangChainçš„å‡½æ•°å¤ªå¤šäº†å°è£…çš„æœ‰ç‚¹æ·±ï¼Œåˆšå…¥é—¨çš„æˆ‘æœ‰ç‚¹åƒä¸æ¶ˆã€‚</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span></span><br><span class="line"><span class="keyword">from</span> langchain_community.llms.chatglm3 <span class="keyword">import</span> ChatGLM3</span><br><span class="line"><span class="comment"># ChatPromptTemplateç”¨æ¥ç”Ÿæˆå¯¹è¯çš„æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">from</span> langchain.prompts <span class="keyword">import</span> ChatPromptTemplate</span><br><span class="line"><span class="comment"># å¯ä»¥å¯¹è¾“å‡ºæ–‡æœ¬è¿›è¡Œè§£æ</span></span><br><span class="line"><span class="keyword">from</span> langchain.schema <span class="keyword">import</span> BaseOutputParser</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™é‡Œä¸ºäº†æµ‹è¯•ä¸€ä¸‹å°†è¾“å‡ºçš„æ–‡æœ¬æŒ‰ç…§é€—å·è¿›è¡Œåˆ’åˆ†æˆåˆ—è¡¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CommaSplitParse</span>(BaseOutputParser[<span class="built_in">list</span>[<span class="built_in">str</span>]]):</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, text: <span class="built_in">str</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">str</span>]:</span><br><span class="line">        v = text.strip().split(<span class="string">","</span>)</span><br><span class="line">        <span class="keyword">return</span> v</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸ºäº†å¾—åˆ°æ¯”è¾ƒå¹²å‡€çš„è¾“å‡ºï¼Œpromptä¹Ÿå°±æ˜¯æç¤ºè¯è¿™é‡Œè¯´çš„å¾ˆæ¸…æ¥šï¼Œè¾“å‡ºåªéœ€è¦è¾“å‡ºé€—å·åˆ†å‰²çš„åˆ—è¡¨å°±è¡Œäº†</span></span><br><span class="line">system_template = <span class="string">"""You are a helpful assistant who generates comma separated list.</span></span><br><span class="line"><span class="string">A user will pass in a category, and you should generate 5 objects in that category in a comma sperated list.</span></span><br><span class="line"><span class="string">ONLY return a comma sperated list, and nothing more."""</span></span><br><span class="line"><span class="comment"># æˆ‘ä»¬äººç»™çš„å¯¹è¯ï¼Œè¿™é‡Œç”¨çš„æ¨¡æ¿ï¼Œç±»ä¼¼äºpythonå†…ç½®çš„format()</span></span><br><span class="line">human_template = <span class="string">"{text}"</span></span><br><span class="line"><span class="comment"># æ¨¡æ¿ï¼ŒæŒ‰ç…§ç¤ºä¾‹å†™å°±è¡Œäº†ï¼Œå®é™…ä¸Šæœ¬è´¨åº”è¯¥å°±æ˜¯ä¸€ä¸ªpythonçš„å­—ç¬¦ä¸²æ ¼å¼åŒ–ï¼š</span></span><br><span class="line"><span class="comment"># a = "ç”¨æˆ·è¾“å…¥ï¼š{text}"</span></span><br><span class="line"><span class="comment"># a.format(text="ä½ å¥½ï¼")</span></span><br><span class="line">chat_prompt = ChatPromptTemplate.from_messages([</span><br><span class="line">    (<span class="string">"system"</span>, system_template),</span><br><span class="line">    (<span class="string">"human"</span>, human_template)</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¥½æˆæ¥äº†ï¼Œæ”¾åœ¨ä¸‹é¢è¯´</span></span><br><span class="line">chain = chat_prompt | ChatGLM3(endpoint_url=<span class="string">"http://127.0.0.1:8000/v1/chat/completions"</span>) | CommaSplitParse()</span><br><span class="line"><span class="comment"># chainæ¥å—è¾“å…¥å¼€å§‹é“¾å¼è°ƒç”¨</span></span><br><span class="line">chain.invoke({<span class="string">"text"</span>: <span class="string">"colors"</span>})</span><br><span class="line"><span class="comment"># ['blue', 'green', 'red', 'yellow', 'purple']</span></span><br></pre></td></tr></tbody></table></figure>
<p>å¯¹äºï¼š</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chain = chat_prompt | ChatGLM3(endpoint_url=<span class="string">"http://127.0.0.1:8000/v1/chat/completions"</span>) | CommaSplitParse()</span><br></pre></td></tr></tbody></table></figure>
<ol>
<li><code>chat_prompt</code>è¿™é‡Œå¹¶æ²¡æœ‰å†™æˆ<code>chat_prompt()</code>ï¼Œå¯¹äºpythonè¯­æ³•ç†è§£å¤šä¸€ç‚¹çš„åº”è¯¥æ˜ç™½ä¸¤è€…çš„å·®åˆ«ï¼Œ<code>chat_prompt</code>å®é™…ä¸Šè¿˜æ˜¯å‡½æ•°æˆ–è€…å¯¹è±¡æœ¬èº«ï¼Œè€Œ<code>chat_prompt()</code>ç›¸å½“äºå¯¹å‡½æ•°æ‰§è¡Œäº†å¾—åˆ°ç»“æœäº†ã€‚å¯ä»¥è¯•ä¸€ä¸‹ï¼š<code>chat_prompt({"text": "colors"})</code>ï¼Œä½†æ˜¯æŠ¥é”™äº†ï¼Œè¿™é‡Œå¯èƒ½å¹¶ä¸æ˜¯ç®€å•ç†è§£çš„ç›´æ¥è°ƒç”¨ï¼Œå¯èƒ½æ˜¯è°ƒç”¨æŸä¸ªå‡½æ•°ã€‚</li>
<li><code>ChatGLM3(endpoint_url="http://127.0.0.1:8000/v1/chat/completions")</code>ï¼Œè¿™é‡Œä½ å¯èƒ½ä¼šè¯´è¿™ä¸æ˜¯å‡½æ•°è°ƒç”¨äº†å—ï¼Œè¿™é‡Œå› ä¸º<code>ChatGLM3</code>æ˜¯ä¸€ä¸ªç±»ï¼Œè¿™æ˜¯ä¸ºäº†ä¼ å‚æ•°ï¼Œç„¶åè¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼ˆæŸ¥çœ‹<a target="_blank" rel="noopener" href="https://github.com/langchain-ai/langchain/blob/master/libs/community/langchain_community/llms/chatglm3.py#L37">æºç </a>ï¼Œè¿™ä¸ªç±»æ˜¯åŒ…å«æœ‰<code>_call</code>æ–¹æ³•çš„ï¼‰ï¼Œè¿™ä¸ªå¯¹è±¡å¯ä»¥è¢«å½“æˆå‡½æ•°å»callã€‚</li>
<li><code>CommaSplitParse()</code>å¾—åˆ°å…·ä½“å¯¹è±¡ï¼Œä¸Šé¢çš„è¾“å‡ºä¼ å…¥è¿›æ¥ä¼šè¢«<code>parse()</code>å‡½æ•°è¿›è¡Œå¤„ç†ï¼Œä½ é—®ä¸ºä»€ä¹ˆè°ƒç”¨çš„æ˜¯<code>parse()</code>è€Œä¸æ˜¯ä»€ä¹ˆ<code>xxx()</code>å‡½æ•°ï¼Œåº”è¯¥æ˜¯ç»§æ‰¿<code>BaseOutputParser</code>çš„ç‰¹æ€§å§ã€‚</li>
</ol>
<p>æ•´ä¸ªè¿‡ç¨‹æˆ‘è®¤ä¸ºæ˜¯ï¼š</p>
<figure class="highlight text"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥å‚æ•°ï¼š{"text": "colors"} </span><br><span class="line">-&gt; å‚æ•°ä¼ é€’ç»™chat_prompt</span><br><span class="line">-&gt; chat_promptä¸­çš„{text}è¢«æ›¿æ¢ä¸ºcolors</span><br><span class="line">-&gt; chat_promptä¼ å…¥åˆ°ChatGLM3å¯¹è±¡</span><br><span class="line">-&gt; ChatGLM3å¯¹è±¡æ‰§è¡Œ_callçš„æ–¹æ³•å°†è¿™äº›chat_promptè½¬æ¢ä¸ºjsonæ•°æ®</span><br><span class="line">-&gt; ChatGLM3å¯¹è±¡æºå¸¦ç€jsonæ•°æ®é€šè¿‡APIè®¿é—®ç½‘å€</span><br><span class="line">-&gt; APIç½‘å€æ¥å—å‚æ•°è¿”å›ç»“æœ</span><br><span class="line">-&gt; ChatGLM3æ‹¿åˆ°ç»“æœï¼ˆåç»­å¯èƒ½åˆåšäº†ä»€ä¹ˆå¤„ç†ï¼Œæˆ‘ä¸ç¡®å®šï¼‰</span><br><span class="line">-&gt; ç»“æœä¼ é€’ç»™CommaSplitParse</span><br><span class="line">-&gt; CommaSplitParseå°†ç»“æœè§£æ</span><br><span class="line">-&gt; å¾—åˆ°è¿”å›å€¼</span><br></pre></td></tr></tbody></table></figure>
<p>æŒ‰ç…§è¿™ä¸ªæƒ³æ³•ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ¯”å¦‚å°†æœ€åçš„åˆ—è¡¨joinæˆå­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">merge_list</span>(<span class="params">l</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">","</span>.join(l)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†å®šä¹‰ä¸€échain</span></span><br><span class="line"><span class="comment"># æ³¨æ„æˆ‘å†™çš„æ˜¯merge_listï¼Œä¸æ˜¯merge_list()</span></span><br><span class="line">chain = chat_prompt | ChatGLM3(endpoint_url=<span class="string">"http://127.0.0.1:8000/v1/chat/completions"</span>) | CommaSplitParse() | merge_list</span><br><span class="line">chain.invoke({<span class="string">"text"</span>: <span class="string">"colors"</span>})</span><br><span class="line"><span class="comment"># 'blue,green,red,yellow,purple'</span></span><br></pre></td></tr></tbody></table></figure>
<p>æˆåŠŸï¼Œçœ‹æ¥çš„ç¡®å¦‚æ­¤ï¼</p>
<p>å¥½äº†ï¼Œåˆ°è¿™é‡Œå®Œæ•´èµ°å®Œäº†ç¬¬ä¸€ä¸ªchainçš„ç¤ºä¾‹ï¼Œæ˜¯ç”¨çš„æœ¬åœ°æ¨¡å‹å“¦ï¼ç”¨åœ¨çº¿APIå°±æ–¹ä¾¿å¾ˆå¤šã€‚</p>
<p>è¿™é‡Œçš„<code>from langchain_community.llms.chatglm3 import ChatGLM3</code>ä»ç„¶æ˜¯ä»langchainä¸­å¼•å…¥çš„ï¼Œåé¢æˆ‘ç¢ç£¨ä¸€ä¸‹è‡ªå·±å†™ä¸€ä¸ªç±»æ¥å°è£…æœ¬åœ°çš„æ¨¡å‹çš„LLMï¼Œè¿™æ ·ä¼šæ›´åŠ çµæ´»ã€‚</p>
<p>å†åé¢ä¼šåŸºäºè¿™ä¸ªåšæ›´è¿›ä¸€æ­¥çš„åº”ç”¨ï¼Œæ¯”å¦‚æœ¬åœ°æ–‡æ¡£æœç´¢çš„RAGåº”ç”¨ã€Agentã€‚</p>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://python.langchain.com/v0.1/docs/get_started/introduction/">Langchainå®˜æ–¹æ–‡æ¡£-v0.1</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Da4y1z7h4/?spm_id_from=333.1007.top_right_bar_window_custom_collection.content.click&amp;vd_source=e3d2a33137ceed16af229320617a0061">[èŒ‰å·] #langchainæ•™ç¨‹ [1] Introduction ç®€ä»‹</a></li>
</ul>
<script src="https://giscus.app/client.js" data-repo="eternal-bug/giscus" data-repo-id="R_kgDOMHOH6Q" data-category="Announcements" data-category-id="DIC_kwDOMHOH6c4Cf-m4" data-mapping="url" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="preferred_color_scheme" data-lang="zh-CN" crossorigin="anonymous" async="">
</script></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://eternal-bug.github.io">eternal-bug</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://eternal-bug.github.io/posts/ae6567a8.html">https://eternal-bug.github.io/posts/ae6567a8.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://eternal-bug.github.io" target="_blank">eternal-bugçš„åšå®¢</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ChatGLM3/">ChatGLM3</a><a class="post-meta__tags" href="/tags/LangChain/">LangChain</a></div><div class="post_share"><div class="social-share" data-image="/img/avatar.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> æ‰“èµ</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/posts/e4f5c24f.html" title="æ¸…åæ™ºè°±Chat-glm4æ¨¡å‹æœåŠ¡å™¨æœ¬åœ°éƒ¨ç½²"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">æ¸…åæ™ºè°±Chat-glm4æ¨¡å‹æœåŠ¡å™¨æœ¬åœ°éƒ¨ç½²</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/posts/e4f5c24f.html" title="æ¸…åæ™ºè°±Chat-glm4æ¨¡å‹æœåŠ¡å™¨æœ¬åœ°éƒ¨ç½²"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-06-15</div><div class="title">æ¸…åæ™ºè°±Chat-glm4æ¨¡å‹æœåŠ¡å™¨æœ¬åœ°éƒ¨ç½²</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">eternal-bug</div><div class="author-info__description">ä¸€ä¸ªå–œæ¬¢ç‰µç€éª†é©¼ã€å¸¦ç€é—ªäº®Rå½¢çŠ¶æˆ’æŒ‡çš„ç™½èœå“¥ã€‚</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">15</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/eternal-bug"><i class="fab fa-github"></i><span>å…³æ³¨æˆ‘</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">ä»‹ç»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E6%88%90"><span class="toc-number">2.</span> <span class="toc-text">ç»„æˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.</span> <span class="toc-text">ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#chatglm3-6b%E6%A8%A1%E5%9E%8B%E7%9A%84%E9%83%A8%E7%BD%B2"><span class="toc-number">4.</span> <span class="toc-text">ChatGLM3-6bæ¨¡å‹çš„éƒ¨ç½²</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%9C%AC%E5%9C%B0%E6%A8%A1%E5%9E%8B%E7%9A%84llm%E5%8A%9F%E8%83%BD"><span class="toc-number">5.</span> <span class="toc-text">æµ‹è¯•æœ¬åœ°æ¨¡å‹çš„LLMåŠŸèƒ½</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9D%E8%AF%95langchain%E7%9A%84chain%E5%8A%9F%E8%83%BD"><span class="toc-number">6.</span> <span class="toc-text">åˆè¯•LangChainçš„ChainåŠŸèƒ½</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">7.</span> <span class="toc-text">å‚è€ƒ</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/ae6567a8.html" title="LangChain + æœ¬åœ°ChatGLM3æ¨¡å‹æ„å»ºä¸€ä¸ªç®€å•çš„Chain">LangChain + æœ¬åœ°ChatGLM3æ¨¡å‹æ„å»ºä¸€ä¸ªç®€å•çš„Chain</a><time datetime="2024-06-19T14:06:36.000Z" title="å‘è¡¨äº 2024-06-19 22:06:36">2024-06-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/e4f5c24f.html" title="æ¸…åæ™ºè°±Chat-glm4æ¨¡å‹æœåŠ¡å™¨æœ¬åœ°éƒ¨ç½²">æ¸…åæ™ºè°±Chat-glm4æ¨¡å‹æœåŠ¡å™¨æœ¬åœ°éƒ¨ç½²</a><time datetime="2024-06-15T08:15:32.000Z" title="å‘è¡¨äº 2024-06-15 16:15:32">2024-06-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/2c428f3d.html" title="æœ€æ–°stable diffusion3æ¨¡å‹çš„æœåŠ¡å™¨æœ¬åœ°éƒ¨ç½²">æœ€æ–°stable diffusion3æ¨¡å‹çš„æœåŠ¡å™¨æœ¬åœ°éƒ¨ç½²</a><time datetime="2024-06-14T10:57:24.000Z" title="å‘è¡¨äº 2024-06-14 18:57:24">2024-06-14</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/f89fb3f7.html" title="Stable Diffusionæœ¬åœ°éƒ¨ç½²+controlNetæ’ä»¶">Stable Diffusionæœ¬åœ°éƒ¨ç½²+controlNetæ’ä»¶</a><time datetime="2024-06-13T11:32:19.000Z" title="å‘è¡¨äº 2024-06-13 19:32:19">2024-06-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/f2633fba.html" title="ç”Ÿç‰©ç”»å›¾å¤§ä½œæˆ˜ä¹‹åŸºç¡€ç¯‡">ç”Ÿç‰©ç”»å›¾å¤§ä½œæˆ˜ä¹‹åŸºç¡€ç¯‡</a><time datetime="2024-06-12T16:14:46.000Z" title="å‘è¡¨äº 2024-06-13 00:14:46">2024-06-13</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/starbound.half.png')"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2024 By eternal-bug</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">ä½ å¥½ï¼æ¬¢è¿æ¥åˆ°<a href="https://eternal-bug.github.io">æˆ‘çš„åšå®¢</a>ã€‚</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>